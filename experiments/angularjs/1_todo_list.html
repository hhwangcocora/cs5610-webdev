<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Week 4 Experiment</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">

    <script src="../js/angular.min.js"></script>

    <script src="1_todo_list.js"></script>
</head>
<body>
<header class="container">
    <h1>Experiment 1: todo list using angular js</h1>
</header>
<main ng-app="todoApp">
    <div class="container" ng-controller="todoController">
        <h2>TODOs:</h2>
        <div class="row">
            <div class="col-sm-4">
                <form class="form-inline">
                    <input type="text" id="newItem" class="form-control" ng-model="newTodo">
                    <button type="button" id="addNewItem" class="btn btn-primary" ng-click="addItem()">Add Todo</button>
                </form>
            </div>
        </div>
        <div id="list" >
            <div class="row" ng-repeat="item in todoItems" id="$index">
                <div class="col-sm-5" >
                    <input type="checkbox" ng-model="item.check">
                    <span>{{item.description}}</span>
                    <span class="glyphicon glyphicon-remove" ng-click="removeItem($index)"></span>
                </div>
            </div>
        </div>

        <br/>
        <div>
            <h2>Documentation</h2>

            <p>In this experiment, I practised angular js by converting my previous todo experiment from javascript/jQuery
            to angular js.</p>
            <p>First of all, I created angularjs module and controller by using <code>ng-app</code> and <code>ng-controller</code>.
            Then I took advantage of angularjs 2 way data binding. The input field is binded to newTodo variable using
            <code>ng-model</code>. The todo item array is binded to the list in html page, and be displayed there using
            <code>ng-repeat</code>. Here the checkbox can directly manipulate <code>item.check</code> by just declaring
            <code>ng-model</code>, without any extra code to set the value to true or false. Also I used <code>$index</code>
            inside <code>ng-repeat</code> to locate and remove the item. </p>
            <p>I found angular js is a very powerful framework. By using it, my js code is only 1/3 of  original javascript code.
            Also, its MVC pattern separate design and control, hence makes the code more easy to develop and to maintain.</p>
            <h2>Code Snippet</h2>

            <p>Following code shows how to add a new todo item. The <code>ng-click</code> specifies the function to call
            when user click the button, and the <code>ng-model</code> binds input field with newToDo variable.</p>

        <pre>
            &lt;input type="text" id="newItem" class="form-control" ng-model="newTodo"&gt;
            &lt;button type="button" id="addNewItem" class="btn btn-primary" ng-click="addItem()"&gt;Add Todo&lt;/button&gt;

        </pre>
            <p>So that inside the angularjs code, I only need to get the newToDo variable and push to todoItems, which has
            been binded to the list on html page. There is no single line in angular js manipulating html elements directly. </p>

        <pre>
            $scope.addItem = function() {
                    var description = $scope.newTodo
                    if (!description) {
                        return
                    }
                    todoItems.push({
                        'check':false,
                        'description':description
                    })
                    $scope.newTodo = ''
                }
        </pre>

            <h2>Reference</h2>
            <a href="https://docs.angularjs.org/api" target="_blank">Angular JS API</a>
            <h2>Source code</h2>


            <p><a href="../../fileview/Default.aspx?~/experiments/angularjs/1_todo_list.html">1_todo_list.html</a></p>
            <p><a href="../../fileview/Default.aspx?~/experiments/angularjs/1_todo_list.js">1_todo_list.js</a></p>
        </div>

    </div>


</main>

</body>
</html>